quando fui rodar deu esse erro node:internal/modules/esm/resolve:873 throw new ERR_MODULE_NOT_FOUND(packageName, fileURLToPath(base), null); ^ Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /app/dist/index.js at packageResolve (node:internal/modules/esm/resolve:873:9) at moduleResolve (node:internal/modules/esm/resolve:946:18) at defaultResolve (node:internal/modules/esm/resolve:1188:11) at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12) at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25) at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38) at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38) at ModuleJob._link (node:internal/modules/esm/module_job:168:49) { code: 'ERR_MODULE_NOT_FOUND' } Node.js v20.19.6 node:internal/modules/esm/resolve:873 throw new ERR_MODULE_NOT_FOUND(packageName, fileURLToPath(base), null); ^ Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /app/dist/index.js at packageResolve (node:internal/modules/esm/resolve:873:9) at moduleResolve (node:internal/modules/esm/resolve:946:18) at defaultResolve (node:internal/modules/esm/resolve:1188:11) at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12) at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25) at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38) at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38) at ModuleJob._link (node:internal/modules/esm/module_job:168:49) { code: 'ERR_MODULE_NOT_FOUND' }Show less

O erro indica que o pacote vite est√° sendo importado no arquivo /app/dist/index.js, mas ele n√£o est√° dispon√≠vel no ambiente de produ√ß√£o. Isso ocorre porque o vite √© uma depend√™ncia de desenvolvimento e n√£o deveria ser necess√°rio no ambiente de produ√ß√£o.

O problema pode estar relacionado a como o c√≥digo foi constru√≠do ou como o vite est√° sendo usado no projeto. Vamos corrigir isso:

Passos para corrigir:
1. Verifique o uso do vite no c√≥digo
O vite √© uma ferramenta de build e n√£o deveria ser importado ou usado diretamente no c√≥digo de produ√ß√£o. Verifique se h√° alguma importa√ß√£o de vite no seu c√≥digo, especialmente no arquivo index.js ou em outros arquivos no diret√≥rio dist.

Se encontrar algo como:

import vite from 'vite';
Remova essa importa√ß√£o, pois ela n√£o √© necess√°ria no ambiente de produ√ß√£o.

2. Garanta que o build est√° correto
Certifique-se de que o comando npm run build est√° gerando os arquivos corretamente no diret√≥rio dist. O vite deve ser usado apenas para construir os arquivos, e o resultado final n√£o deve depender dele.

No seu package.json, o script de build deve ser algo como:

"scripts": {
  "build": "vite build"
}
Se o vite est√° sendo usado de forma incorreta no c√≥digo de produ√ß√£o, ajuste o c√≥digo para que ele n√£o dependa do vite em runtime.

3. Atualize o Dockerfile
Certifique-se de que o Dockerfile est√° configurado corretamente para separar o ambiente de build e produ√ß√£o. Aqui est√° um exemplo atualizado:

# Etapa 1: Build
FROM node:20-slim AS builder

# Instale depend√™ncias necess√°rias para o build
WORKDIR /app
COPY package*.json ./
RUN npm install  # Instala todas as depend√™ncias, incluindo devDependencies

# Copie o c√≥digo e construa o projeto
COPY . .
RUN npm run build

# Etapa 2: Produ√ß√£o
FROM node:20-slim

# Instale apenas as depend√™ncias de produ√ß√£o
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

# Copie os arquivos constru√≠dos da etapa de build
COPY --from=builder /app/dist ./dist

# Exponha a porta e defina o comando de inicializa√ß√£o
EXPOSE 5000
CMD ["node", "dist/index.js"]
4. Reconstrua a imagem
Ap√≥s ajustar o c√≥digo e o Dockerfile, reconstrua a imagem:

docker build -t betv4 .
5. Teste novamente
Rode o container:

docker run -d -p 5000:5000 --name betv4-container betv4
Acesse http://localhost:5000‚Å† para verificar se est√° funcionando.

Se o problema persistir:
Verifique novamente o c√≥digo no diret√≥rio dist para garantir que n√£o h√° depend√™ncias de desenvolvimento como vite.
Me envie o conte√∫do do arquivo index.js ou qualquer outro arquivo relevante no diret√≥rio dist para que eu possa ajudar a identificar o problema.
Estou aqui para ajudar! üòä